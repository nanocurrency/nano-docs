<!doctype html><html lang="en" class="no-js"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta name="lang:clipboard.copy" content="Copy to clipboard"><meta name="lang:clipboard.copied" content="Copied to clipboard"><meta name="lang:search.language" content="en"><meta name="lang:search.pipeline.stopwords" content="True"><meta name="lang:search.pipeline.trimmer" content="True"><meta name="lang:search.result.none" content="No matching documents"><meta name="lang:search.result.one" content="1 matching document"><meta name="lang:search.result.other" content="# matching documents"><meta name="lang:search.tokenizer" content="[\s\-]+"><link rel="shortcut icon" href="../../assets/images/favicon.png"><meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.3.0"><title>Protocol Design Overview</title><link rel="stylesheet" href="../../assets/stylesheets/application.4031d38b.css"><link rel="stylesheet" href="../../assets/stylesheets/application-palette.224b79ff.css"><meta name="theme-color" content=""><script src="../../assets/javascripts/modernizr.74668098.js"></script><link href="https://fonts.gstatic.com" rel="preconnect" crossorigin><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans:300,400,400i,700|Roboto+Mono&display=swap"><style>body,input{font-family:"Noto Sans","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style><link rel="stylesheet" href="../../assets/fonts/material-icons.css"><link rel="stylesheet" href="../../stylesheets/extras.css"><script>window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-XXXXXXXX-X", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })</script><script async src="https://www.google-analytics.com/analytics.js"></script></head><body dir="ltr" data-md-color-primary="#4a90e2" data-md-color-accent="#131121"><svg class="md-svg"><defs><svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg></defs></svg> <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off"> <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off"> <label class="md-overlay" data-md-component="overlay" for="__drawer"></label><a href="#protocol-design-overview" tabindex="1" class="md-skip">Skip to content </a><header class="md-header" data-md-component="header"><nav class="md-header-nav md-grid"><div class="md-flex"><div class="md-flex__cell md-flex__cell--shrink"><a href="../.." title="Documentation" class="md-header-nav__button md-logo"><img src="../../images/nano.svg" width="24" height="24"></a></div><div class="md-flex__cell md-flex__cell--shrink"><label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label></div><div class="md-flex__cell md-flex__cell--stretch"><div class="md-flex__ellipsis md-header-nav__title" data-md-component="title"><span class="md-header-nav__topic">Documentation</span><span class="md-header-nav__topic">Protocol Design Overview</span></div></div><div class="md-flex__cell md-flex__cell--shrink"><label class="md-icon md-icon--search md-header-nav__button" for="__search"></label><div class="md-search" data-md-component="search" role="dialog"><label class="md-search__overlay" for="__search"></label><div class="md-search__inner" role="search"><form class="md-search__form" name="search"><input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active"> <label class="md-icon md-search__icon" for="__search"></label> <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">&#xE5CD;</button></form><div class="md-search__output"><div class="md-search__scrollwrap" data-md-scrollfix><div class="md-search-result" data-md-component="result"><div class="md-search-result__meta">Type to start searching</div><ol class="md-search-result__list"></ol></div></div></div></div></div></div><div class="md-flex__cell md-flex__cell--shrink"><div class="md-header-nav__source"><a href="https://github.com/nanocurrency/nano-docs/" title="Go to repository" class="md-source" data-md-source="github"><div class="md-source__icon"><svg viewBox="0 0 24 24" width="24" height="24"><use xlink:href="#__github" width="24" height="24"></use></svg></div><div class="md-source__repository">nanocurrency/nano-docs</div></a></div></div></div></nav></header><div class="md-container"><main class="md-main"><div class="md-main__inner md-grid" data-md-component="container"><div class="md-sidebar md-sidebar--primary" data-md-component="navigation"><div class="md-sidebar__scrollwrap"><div class="md-sidebar__inner"><nav class="md-nav md-nav--primary" data-md-level="0"><label class="md-nav__title md-nav__title--site" for="__drawer"><a href="../.." title="Documentation" class="md-nav__button md-logo"><img src="../../images/nano.svg" width="48" height="48"></a>Documentation</label><div class="md-nav__source"><a href="https://github.com/nanocurrency/nano-docs/" title="Go to repository" class="md-source" data-md-source="github"><div class="md-source__icon"><svg viewBox="0 0 24 24" width="24" height="24"><use xlink:href="#__github" width="24" height="24"></use></svg></div><div class="md-source__repository">nanocurrency/nano-docs</div></a></div><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../.." title="Home" class="md-nav__link">Home</a></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2"><label class="md-nav__link" for="nav-2">What is Nano?</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-2">What is Nano?</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../what-is-nano/overview/" title="Overview" class="md-nav__link">Overview</a></li><li class="md-nav__item"><a href="../../what-is-nano/contributing/" title="Contributing" class="md-nav__link">Contributing</a></li><li class="md-nav__item"><a href="../../what-is-nano/exploring-more/" title="Exploring More" class="md-nav__link">Exploring More</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3"><label class="md-nav__link" for="nav-3">Running a Node</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-3">Running a Node</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../running-a-node/overview/" title="Overview" class="md-nav__link">Overview</a></li><li class="md-nav__item"><a href="../../running-a-node/node-setup/" title="Node Setup" class="md-nav__link">Node Setup</a></li><li class="md-nav__item"><a href="../../running-a-node/docker-management/" title="Docker Management" class="md-nav__link">Docker Management</a></li><li class="md-nav__item"><a href="../../running-a-node/beta-network/" title="Beta Network" class="md-nav__link">Beta Network</a></li><li class="md-nav__item"><a href="../../running-a-node/configuration/" title="Configuration" class="md-nav__link">Configuration</a></li><li class="md-nav__item"><a href="../../running-a-node/beyond-the-node/" title="Beyond the Node" class="md-nav__link">Beyond the Node</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4"><label class="md-nav__link" for="nav-4">Integration Guides</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-4">Integration Guides</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../integration-guides/the-basics/" title="The Basics" class="md-nav__link">The Basics</a></li><li class="md-nav__item"><a href="../../integration-guides/key-management/" title="Key Management" class="md-nav__link">Key Management</a></li><li class="md-nav__item"><a href="../../integration-guides/build-options/" title="Build Options" class="md-nav__link">Build Options</a></li><li class="md-nav__item"><a href="../../integration-guides/advanced/" title="Advanced" class="md-nav__link">Advanced</a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5"><label class="md-nav__link" for="nav-5">Commands</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-5">Commands</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="../../commands/rpc-protocol/" title="RPC Protocol" class="md-nav__link">RPC Protocol</a></li><li class="md-nav__item"><a href="../../commands/command-line-interface/" title="Command Line Interface" class="md-nav__link">Command Line Interface</a></li></ul></nav></li><li class="md-nav__item md-nav__item--active md-nav__item--nested"><input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked><label class="md-nav__link" for="nav-6">Protocol Design</label><nav class="md-nav" data-md-component="collapsible" data-md-level="1"><label class="md-nav__title" for="nav-6">Protocol Design</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item md-nav__item--active"><input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc"><label class="md-nav__link md-nav__link--active" for="__toc">Overview</label><a href="./" title="Overview" class="md-nav__link md-nav__link--active">Overview</a><nav class="md-nav md-nav--secondary"><label class="md-nav__title" for="__toc">Table of contents</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="#feature-details" title="Feature Details" class="md-nav__link">Feature Details</a></li><li class="md-nav__item"><a href="#contributing-code-to-the-nano-node" title="Contributing code to the Nano node" class="md-nav__link">Contributing code to the Nano node</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#about-the-code-base" title="About the code base" class="md-nav__link">About the code base</a></li><li class="md-nav__item"><a href="#testing" title="Testing" class="md-nav__link">Testing</a></li><li class="md-nav__item"><a href="#github-collaboration" title="GitHub collaboration" class="md-nav__link">GitHub collaboration</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#code-process" title="Code Process" class="md-nav__link">Code Process</a></li></ul></nav></li><li class="md-nav__item"><a href="#code-standard" title="Code standard" class="md-nav__link">Code standard</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#formatting" title="Formatting" class="md-nav__link">Formatting</a></li><li class="md-nav__item"><a href="#coding-guidelines" title="Coding guidelines" class="md-nav__link">Coding guidelines</a></li><li class="md-nav__item"><a href="#performance-and-scalabiliy-considerations" title="Performance and scalabiliy considerations" class="md-nav__link">Performance and scalabiliy considerations</a></li><li class="md-nav__item"><a href="#security" title="Security" class="md-nav__link">Security</a></li></ul></nav></li><li class="md-nav__item"><a href="#general-tips-for-contributors" title="General tips for contributors" class="md-nav__link">General tips for contributors</a></li></ul></nav></li></ul></nav></li><li class="md-nav__item"><a href="../distribution-and-units/" title="Distribution and Units" class="md-nav__link">Distribution and Units</a></li><li class="md-nav__item"><a href="../networking/" title="Networking" class="md-nav__link">Networking</a></li><li class="md-nav__item"><a href="../network-attacks/" title="Network Attacks" class="md-nav__link">Network Attacks</a></li><li class="md-nav__item"><a href="../signing-hashing-and-key-derivation/" title="Signing, Hashing and Key Derivation" class="md-nav__link">Signing, Hashing and Key Derivation</a></li></ul></nav></li><li class="md-nav__item"><a href="../../glossary/" title="Glossary" class="md-nav__link">Glossary</a></li></ul></nav></div></div></div><div class="md-sidebar md-sidebar--secondary" data-md-component="toc"><div class="md-sidebar__scrollwrap"><div class="md-sidebar__inner"><nav class="md-nav md-nav--secondary"><label class="md-nav__title" for="__toc">Table of contents</label><ul class="md-nav__list" data-md-scrollfix><li class="md-nav__item"><a href="#feature-details" title="Feature Details" class="md-nav__link">Feature Details</a></li><li class="md-nav__item"><a href="#contributing-code-to-the-nano-node" title="Contributing code to the Nano node" class="md-nav__link">Contributing code to the Nano node</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#about-the-code-base" title="About the code base" class="md-nav__link">About the code base</a></li><li class="md-nav__item"><a href="#testing" title="Testing" class="md-nav__link">Testing</a></li><li class="md-nav__item"><a href="#github-collaboration" title="GitHub collaboration" class="md-nav__link">GitHub collaboration</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#code-process" title="Code Process" class="md-nav__link">Code Process</a></li></ul></nav></li><li class="md-nav__item"><a href="#code-standard" title="Code standard" class="md-nav__link">Code standard</a><nav class="md-nav"><ul class="md-nav__list"><li class="md-nav__item"><a href="#formatting" title="Formatting" class="md-nav__link">Formatting</a></li><li class="md-nav__item"><a href="#coding-guidelines" title="Coding guidelines" class="md-nav__link">Coding guidelines</a></li><li class="md-nav__item"><a href="#performance-and-scalabiliy-considerations" title="Performance and scalabiliy considerations" class="md-nav__link">Performance and scalabiliy considerations</a></li><li class="md-nav__item"><a href="#security" title="Security" class="md-nav__link">Security</a></li></ul></nav></li><li class="md-nav__item"><a href="#general-tips-for-contributors" title="General tips for contributors" class="md-nav__link">General tips for contributors</a></li></ul></nav></li></ul></nav></div></div></div><div class="md-content"><article class="md-content__inner md-typeset"><a href="https://github.com/nanocurrency/nano-docs/edit/master/docs/protocol-design/overview.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a><h1 id="protocol-design-overview">Protocol Design Overview<a class="headerlink" href="#protocol-design-overview" title="Permanent link">&para;</a></h1>
<p>The Nano protocol is a complex piece of software aiming at a simple, singular goal: transfer value as efficiently as possible. Doing so on a network that is decentralized for the long-term involves many moving parts. Below are some detailed explanations of various pieces of the protocol intended for advanced developers and those with deep knowledge of the network.</p>
<div class="admonition tip">
<p class="admonition-title">Contributing to the code</p>
<p>If you are interested in helping develop the C++ based Nano node we will help you out! Check out our details on <a href="/protocol-design/overview#contributing-code-to-the-nano-node">contributing code to the Nano node</a> to get started.</p>
</div>
<h2 id="feature-details">Feature Details<a class="headerlink" href="#feature-details" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Feature</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="/protocol-design/distribution-and-units/">Distribution and Units</a></td>
<td>Original distribution details and Nano unit breakdowns</td>
</tr>
<tr>
<td><a href="/protocol-design/networking/">Networking</a></td>
<td>Details about the network protocols nodes use to communicate with peers</td>
</tr>
<tr>
<td><a href="/protocol-design/network-attacks/">Network Attacks</a></td>
<td>Explanation of some of the potential attack vectors on the Nano network</td>
</tr>
<tr>
<td><a href="/protocol-design/signing-hashing-and-key-derivation/">Signing, Hashing and Key Derivation</a></td>
<td>Details of the algorithms and functions used for these activities</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="contributing-code-to-the-nano-node">Contributing code to the Nano node<a class="headerlink" href="#contributing-code-to-the-nano-node" title="Permanent link">&para;</a></h2>
<h3 id="about-the-code-base">About the code base<a class="headerlink" href="#about-the-code-base" title="Permanent link">&para;</a></h3>
<p>Nano is written in C++14 and supports Linux, macOS and Windows.</p>
<p><strong>Libraries</strong></p>
<p>We use Boost to help us write efficient cross platform code, including the async IO library for networking (asio).</p>
<p>Make sure you have the correct <a href="https://github.com/nanocurrency/nano-node/search?utf8=%E2%9C%93&amp;q=find_package+%28Boost&amp;type=">Boost version</a> installed.</p>
<p><strong>Submodules</strong></p>
<table>
<thead>
<tr>
<th><strong>Name</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>cryptopp</td>
<td>Provides the implementation for blake2, AES and other cryptographic schemes.</td>
</tr>
<tr>
<td>phc&#x2011;winner&#x2011;argon2</td>
<td>When encrypting with AES, the password first goes through key derivation, and argon2 is our hash of choice for doing that.</td>
</tr>
<tr>
<td>lmdb</td>
<td>The database library used for the ledger and wallet, with local patches for Windows. This is a very fast and portable key/value store with ordered keys.</td>
</tr>
<tr>
<td>miniupnp</td>
<td>This library is used to do port mapping if the gateway supports it.</td>
</tr>
</tbody>
</table>
<p><strong>Qt Wallet</strong></p>
<p>To build the GUI, set the <code>NANO_GUI</code> flag in cmake. The desktop wallet uses Qt5, but without the MOC compiler. Hence, you cannot use the signals and slots mechanism.</p>
<p>The majority of the Qt wallet code resides in the <code>qt</code> subproject, while the QApplication startup code resides in <code>nano_wallet</code>.</p>
<p><strong>Using CMake</strong></p>
<p>CMake is used to generate build files and project files for various IDE's.</p>
<p>Please familiarize yourself with basic cmake usage, such as how to change cache variables via the command line, ccmake or CMake GUI. This is much more convenient that editing the <code>CMakeLists.txt</code> file directly.</p>
<p>Find out more about building in <a href="/integration-guides/build-options">Integration Guides Build Options</a>.</p>
<h3 id="testing">Testing<a class="headerlink" href="#testing" title="Permanent link">&para;</a></h3>
<p><strong>Add tests</strong></p>
<p>If you add new functionality, adding unit tests to avoid regressions in the future is required.</p>
<p>The easiest way to get started writing your first test is to base it off one of the existing tests. You'll find these in the <code>core_test</code> directory.</p>
<p>Make sure the <code>NANO_TEST</code> cache variable in cmake is set. You should also switch the <code>ACTIVE_NETWORK</code> variable to nano_test_network. </p>
<p><strong>Run tests before creating a pull request</strong></p>
<p>Please run the tests before submitting a PR. Go to the build directory and run the <code>core_test</code> binary.</p>
<p>If you get a lot of failures, such as <code>frontier_req.begin</code> failing, make sure <code>ACTIVE_NETWORK</code> is set to <code>nano_test_network</code></p>
<h3 id="github-collaboration">GitHub collaboration<a class="headerlink" href="#github-collaboration" title="Permanent link">&para;</a></h3>
<p>Communication is the key to working together efficiently. A good way to get in touch with the developers is to join the #development channel on <a href="https://chat.nano.org/">Discord</a>. If you have an idea of an improvement or new feature, consider discussing it first with the team, either on Discord, or by adding an issue. Maybe someone is already working on it, or have suggestions on how to improve on the idea.</p>
<div class="admonition warning">
<p class="admonition-title">Security Vulnerability Disclosure</p>
<p><strong>Do NOT discuss potential security vulnerabilities on the issue tracker, public forums or open discussion channels</strong></p>
<p>If you discover a bug you believe to pose a security risk to the Nano network, please contact <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#98;&#117;&#103;&#115;&#64;&#110;&#97;&#110;&#111;&#46;&#111;&#114;&#103;">&#98;&#117;&#103;&#115;&#64;&#110;&#97;&#110;&#111;&#46;&#111;&#114;&#103;</a> with a proof of concept with full details of the bug including:</p>
<ul>
<li>Repository of the bug</li>
<li>High-level summary</li>
<li>Detailed description</li>
<li>Steps to reproduce</li>
<li>Supporting material/references</li>
<li>The potential security impact of the bug</li>
</ul>
</div>
<h4 id="code-process">Code Process<a class="headerlink" href="#code-process" title="Permanent link">&para;</a></h4>
<h5>Fork and do all your work on a branch</h5>
<p>Nano prefers the standard GitHub workflow. You create a fork of the Nano repository, make branches for features/issues, and commit and push these. </p>
<h5>Create pull requests</h5>
<p>Before:</p>
<ul>
<li>Review your code locally. Have you followed the guidelines in this document?</li>
<li>Run tests. Did you consider adding a test case for your feature?</li>
<li>Commit and push your fork</li>
<li>Create pull request on the upstream repository:<ul>
<li>Make sure you add a description that clearly describes the purpose of the PR.</li>
<li>If the PR solves one or more issues, please reference these in the description.</li>
</ul>
</li>
</ul>
<p>After:</p>
<ul>
<li>Check that CI completes successfully. If not, fix the problem and push an update.</li>
<li>Respond to comments and reviews in a timely fashion.</li>
</ul>
<h5>Resolve conflicts</h5>
<p>If time passes between your pull request (PR) submission and the team accepting it, merge conflicts may occur due to activity on master, such as merging other PR's before yours. In order for your PR to be accepted, you must resolve these conflicts.</p>
<p>The preferred process is to rebase your changes, resolve any conflicts, and push your changes again. <sup id="fnref:2"><a class="footnote-ref" href="#fn:2">2</a></sup><sup id="fnref:3"><a class="footnote-ref" href="#fn:3">3</a></sup></p>
<ul>
<li>Check out your branch</li>
<li><code>git fetch upstream</code></li>
<li><code>git rebase upstream/master</code></li>
<li>Resolve conflicts in your favorite editor</li>
<li><code>git add {filename}</code></li>
<li><code>git rebase --continue</code></li>
<li>Commit and push your branch</li>
</ul>
<p><strong>Consider squashing or amending commits</strong></p>
<p>In the review process, you're likely to get feedback. You'll commit and push more changes, get more feedback, etc. </p>
<p>This can lead to a messy git history, and can make stuff like bisecting harder.</p>
<p>Once your PR is OK'ed, please squash the commits into a one.<sup id="fnref:4"><a class="footnote-ref" href="#fn:4">4</a></sup></p>
<p>Note that you can also update the last commit with <code>git commit --amend</code>. Say your last commit had a typo. Instead of committing and having to squash it later, simply commit with amend and push the branch.</p>
<h3 id="code-standard">Code standard<a class="headerlink" href="#code-standard" title="Permanent link">&para;</a></h3>
<h4 id="formatting">Formatting<a class="headerlink" href="#formatting" title="Permanent link">&para;</a></h4>
<p>clang-format is used to enforce most of the formatting rules, such as:</p>
<ul>
<li>Tabs for indentation.</li>
<li>Open braces go on new lines.</li>
<li>Space before open parenthesis.</li>
<li>Space after comma.</li>
</ul>
<p>Please run <code>ci/clang-format-all.sh</code> before pushing your code to ensure that the formatting is good. If you want to do formatting from the IDE, chances are there's a plugin available. The definition file <code>.clang-format</code> is located in the project root directory.</p>
<p>Make sure you set up your editor to use tabs. Use tabs for indentation, and spaces for alignment <sup id="fnref:5"><a class="footnote-ref" href="#fn:5">5</a></sup>. That way, you can use any tab size you want in your favorite editor, but the code will still look good for people with different settings. </p>
<h4 id="coding-guidelines">Coding guidelines<a class="headerlink" href="#coding-guidelines" title="Permanent link">&para;</a></h4>
<ul>
<li>Use <code>auto</code> type inference for local variables if it's clear from the context what the type will be. Use your best judgement, sometimes adding explicit types can increase readability <sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup></li>
<li>Handle exceptions, including IO exceptions for file and network operations.</li>
<li>Be liberal with <code>assert</code>. Use asserts to check invariants, not potential runtime errors, which should be handled gracefully. Asserts are for detecting bugs, not error handling.</li>
<li>Be liberal with <code>BOOST_LOG</code> statements, except in performance critical paths.</li>
<li>Add comments to explain complex and subtle situations, but avoid comments that reiterates what the code already says.</li>
<li>Use RAII and C++11 smart pointers to manage memory and other resources.</li>
</ul>
<h4 id="performance-and-scalabiliy-considerations">Performance and scalabiliy considerations<a class="headerlink" href="#performance-and-scalabiliy-considerations" title="Permanent link">&para;</a></h4>
<ul>
<li>When making changes, think about performance and scalability. Pick good data structures and think about algorithmic complexity. <ul>
<li>For small data sets, std::vector should be your to-go container, as a linear scan through contiguous memory is often faster than any alternative.</li>
<li>Nested loops yield quadratic behavior - is there an alternative? A typical example is removing an inner lookup loop with a map.</li>
</ul>
</li>
<li>Make sure your change doesn't conflict with the scalability characteristics described in the white paper. </li>
</ul>
<h4 id="security">Security<a class="headerlink" href="#security" title="Permanent link">&para;</a></h4>
<p>Your code will be reviewed with security in mind, but please do your part before creating a pull request:</p>
<ul>
<li>
<p>Familiarize yourself with best practices for writing secure C++ code. In particular:</p>
<ul>
<li>Consult <a href="https://wiki.sei.cmu.edu/confluence/display/cplusplus">https://wiki.sei.cmu.edu/confluence/display/cplusplus</a></li>
<li>Avoid using ANSI C functions. Many of these are prone to buffer overruns.</li>
<li>Avoid using C strings and direct buffer manipulation.</li>
</ul>
</li>
<li>
<p>Use static analysis tools, such as valgrind, XCode instrumentation, linters and sanitizers. These tools are also great for debugging crashes and performance problems.</p>
</li>
</ul>
<h3 id="general-tips-for-contributors">General tips for contributors<a class="headerlink" href="#general-tips-for-contributors" title="Permanent link">&para;</a></h3>
<ul>
<li>Read the <a href="https://nano.org/en/whitepaper">white paper</a></li>
<li>Peruse the code and don't be shy about asking questions if there are parts you don't understand.</li>
<li>Make sure you understand the GitHub workflow.</li>
<li>Participate in the community by reading and replying to GitHub issues, Reddit posts and tweets. This gives you a great insight into the pain points that exists with the software.</li>
</ul>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p><a href="http://www.acodersjourney.com/2016/02/c-11-auto/">http://www.acodersjourney.com/2016/02/c-11-auto/</a>&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:2">
<p><a href="https://help.github.com/articles/resolving-merge-conflicts-after-a-git-rebase/">https://help.github.com/articles/resolving-merge-conflicts-after-a-git-rebase/</a>&#160;<a class="footnote-backref" href="#fnref:2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p><a href="https://help.github.com/articles/resolving-a-merge-conflict-using-the-command-line/">https://help.github.com/articles/resolving-a-merge-conflict-using-the-command-line/</a>&#160;<a class="footnote-backref" href="#fnref:3" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:4">
<p><a href="https://github.com/todotxt/todo.txt-android/wiki/Squash-All-Commits-Related-to-a-Single-Issue-into-a-Single-Commit">https://github.com/todotxt/todo.txt-android/wiki/Squash-All-Commits-Related-to-a-Single-Issue-into-a-Single-Commit</a>&#160;<a class="footnote-backref" href="#fnref:4" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
<li id="fn:5">
<p><a href="https://dmitryfrank.com/articles/indent_with_tabs_align_with_spaces">https://dmitryfrank.com/articles/indent_with_tabs_align_with_spaces</a>&#160;<a class="footnote-backref" href="#fnref:5" title="Jump back to footnote 5 in the text">&#8617;</a></p>
</li>
</ol>
</div></article></div></div></main><footer class="md-footer"><div class="md-footer-nav"><nav class="md-footer-nav__inner md-grid"><a href="../../commands/command-line-interface/" title="Command Line Interface" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev"><div class="md-flex__cell md-flex__cell--shrink"><i class="md-icon md-icon--arrow-back md-footer-nav__button"></i></div><div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span class="md-flex__ellipsis"><span class="md-footer-nav__direction">Previous</span>Command Line Interface</span></div></a><a href="../distribution-and-units/" title="Distribution and Units" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next"><div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span class="md-flex__ellipsis"><span class="md-footer-nav__direction">Next</span>Distribution and Units</span></div><div class="md-flex__cell md-flex__cell--shrink"><i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i></div></a></nav></div><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class="md-footer-copyright">powered by <a href="https://www.mkdocs.org">MkDocs</a> and <a href="https://squidfunk.github.io/mkdocs-material/">Material for MkDocs</a></div><div class="md-footer-social"><link rel="stylesheet" href="../../assets/fonts/font-awesome.css"> <a href="https://github.com/nanocurrency" class="md-footer-social__link fa fa-github"></a>  <a href="https://twitter.com/nano" class="md-footer-social__link fa fa-twitter"></a>  <a href="https://chat.nano.org" class="md-footer-social__link fa fa-comments"></a>  <a href="https://reddit.com/r/nanocurrency" class="md-footer-social__link fa fa-reddit"></a>  <a href="https://medium/nanocurrency" class="md-footer-social__link fa fa-medium"></a>  <a href="https://facebook.com/nanofoundation" class="md-footer-social__link fa fa-facebook"></a>  <a href="https://linkedin.com/company/nano-foundation" class="md-footer-social__link fa fa-linkedin"></a>  <a href="https://www.youtube.com/nanocurrency/" class="md-footer-social__link fa fa-youtube"></a>  <a href="https://www.instagram.com/nanocurrency/" class="md-footer-social__link fa fa-instagram"></a> </div></div></div></footer></div><script src="../../assets/javascripts/application.b260a35d.js"></script><script>app.initialize({version:"1.0.4",url:{base:"../.."}})</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script><script src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js"></script></body></html>